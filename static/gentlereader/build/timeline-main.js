define("utils/ignore-articles",[],function(){var e;return e=function(e){return e.match(/^the /i)?e.substring(4):e.match(/^an /i)?e.substring(3):e.match(/^a /i)?e.substring(2):e}}),define("models/tag-set",["backbone","utils/ignore-articles"],function(e,t){var i;return i=e.Collection.extend({comparator:function(e){var i,n,r;return i=e.has("last_name"),r=e.has("teaser"),n=i?e.get("last_name"):r?e.get("date_entered"):e.get("name"),t(n.toLowerCase())}})}),define("utils/globals",[],function(){var e;return e={},{getGlobals:function(){return e}}}),define("routers/browse-timeline-router",["backbone","utils/globals"],function(e,t){var i;return t=t.getGlobals(),i=e.Router.extend({initialize:function(){return e.history.start({silent:!0})},routes:{":year":"goToYear"},selectAuthor:function(e){return t.app.goToYear(e)}})}),define("views/paginated-collection-view",["backbone"],function(e){var t;return t=e.View.extend({initialize:function(e){return _.extend(this,e),this.render()},render:function(){var e=this;return this.collection&&this.page?this.container.fadeOut("fast",function(){var t,i,n,r,a,o;for(e.container.off().empty(),"all"===e.page?(r=0,t=e.collection.length-1):(a=e.pgParams[e.page-1],r=a.startIndex,t=a.endIndex),i=o=r;t>=r?t>=o:o>=t;i=t>=r?++o:--o)n=new e.View({model:e.collection.models[i],index:i});return e.container.fadeIn("fast",function(){return e.callback?e.callback():void 0})}):console.log("Missing options: requires 'collection' and 'page'."),this}})}),require.config({paths:{jade:"/static/gentlereader/scripts/lib/jade-runtime"},shim:{jade:{exports:"jade"}}}),define("templates/timelineListItem",["jade"],function(jade){function timelineListItem(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<a"),buf.push(attrs({href:"/selections/"+model.get("slug")},{href:!0})),buf.push('>\n  <h2 class="tl-title">'+escape(null==(interp=model.get("title"))?"":interp)+"</h2>by "+escape(null==(interp=model.get("author"))?"":interp)+'</a><span class="tl-showteaser uft-trigger uft-a">[&nbsp;teaser&nbsp;&#9662;&nbsp;]</span>\n<div class="tl-teaser hyphenate uft-b"><span class="teaser-text">'+escape(null==(interp=model.get("teaser"))?"":interp)+"</span><a"),buf.push(attrs({href:"/selections/{"+model.get("slug"),"class":"read-on"},{href:!0})),buf.push(">read&nbsp;on</a></div>")}return buf.join("")}return timelineListItem}),define("views/br-timeline-view",["backbone","views/paginated-collection-view","templates/timelineListItem"],function(e,t,i){var n,r;return n=e.View.extend({tagName:"li",className:"tl-sel uft-group",template:i,initialize:function(){return this.render()},render:function(){var e;return e=this.model,this.$el.append(this.template({model:e})),$("#tl-list").append(this.el),this}}),r=function(e){return new t({collection:e.collection,page:e.page,container:$("#tl-list"),pgParams:e.pgParams,View:n})}}),define("lib/unfinishedToggler",["jquery"],function(e){var t={};t.methods={init:function(i){var n={diasporic:!1,event:"click",exclusive:!0,allOff:!0,initial:!1,preChange:!1,postChange:!1};return this.each(function(){var r=t.root=e(this),a=e.extend({},n,i);r.data("uft",{settings:a}),a.initial&&t.methods._openInitial();var o=a.event+".uft";r.on(o,".uft-trigger",function(){var i=e(this);t.settings=r.data("uft").settings,t.settings.diasporic?t.methods._diasporic(i,r):t.methods._anasporic(i,r)})})},_openInitial:function(){var e=t.root.find(t.settings.initial);t.settings.diasporic?t.methods._diasporic(e,t.root):e.addClass("uft-on")},_anasporic:function(e,i){var n=i.find(".uft-group"),r=n.has(e);t.methods._change(r,n.not(r))},_diasporic:function(i,n){var r=i.data("uft").split(","),a=[],o=[],s=n.find(".uft-trigger, .uft-a, .uft-b");s.each(function(){var t=e(this),i=t.data("uft").split(",");i[0]===r[0]&&(i[1]===r[1]?a.push(t[0]):o.push(t[0]))}),t.methods._change(i,e(o),e(a))},_change:function(e,i,n){t.settings.preChange&&t.settings.preChange();var r=n?n:e;if(e.hasClass("uft-on"))t.settings.allOff&&r.removeClass("uft-on");else{var a=i.filter(".uft-on");r.addClass("uft-on"),t.settings.exclusive&&a.length>0&&a.removeClass("uft-on")}t.settings.postChange&&t.settings.postChange()}},e.fn.unfinishedToggler=function(i){return t.methods[i]?t.methods[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist for jquery.unfinishedToggler."),void 0):t.methods.init.apply(this,arguments)}}),define("apps/timeline-app",["jquery","models/tag-set","routers/browse-timeline-router","views/br-timeline-view","lib/unfinishedToggler"],function(e,t,i,n){var r;return r=Backbone.View.extend({sortField:function(){return e(".sort-radio[name='sortField']:checked").val()},initialize:function(){return e("#tl-list").unfinishedToggler({exclusive:!1}),this.router=new i,Backbone.history.fragment?this.initialRouting():void 0},getSelections:function(){var i,n=this;return i=this.selectionSet=new t,i.url="/api/selections",i.scomparator=function(t,i){var n,r,a,o;return a=e(".sort-radio[name='sortOrder']:checked").val(),n=t.get("source").pub_year,r=i.get("source").pub_year,o=r>n?-1:n>r?1:0,"des"===a&&(o=-1*o),o},i.fetch({error:function(){return console.log("Failed to fetch the selections.")},success:function(){return n.renderSelections()}})},renderSelections:function(){var e;return e={collection:this.selectionSet,page:"all"},n(e)},initialRouting:function(){var t;return t=e(".tl-year[data-year='"+Backbone.history.fragment+"']").offset().top-60,e("html, body").animate({scrollTop:t})}})}),require(["apps/timeline-app","apps/rand-quot-app","utils/globals"],function(e,t,i){var n,r;return i=i.getGlobals(),n=new t,r=i.app=new e}),define("timeline-main",function(){});